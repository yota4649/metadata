{"remainingRequest":"/space/metadata/ui/node_modules/babel-loader/lib/index.js!/space/metadata/ui/src/api/AuthApi.js","dependencies":[{"path":"/space/metadata/ui/src/api/AuthApi.js","mtime":1707869128059},{"path":"/space/metadata/ui/node_modules/cache-loader/dist/cjs.js","mtime":1707869666420},{"path":"/space/metadata/ui/node_modules/babel-loader/lib/index.js","mtime":1707869666788}],"contextDependencies":[],"result":["import { polyfill } from 'es6-promise';\nimport 'isomorphic-fetch';\npolyfill();\nexport default {\n  name: 'AuthApi',\n  login: function login(user, pass) {\n    return fetch('/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        username: '' + user,\n        password: '' + pass\n      }),\n      credentials: 'same-origin'\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.json();\n      } else {\n        return {\n          isError: true,\n          error: response.json()\n        };\n      }\n    }, function (error) {\n      return {\n        isError: true,\n        error: error\n      };\n    });\n  },\n  logout: function logout() {\n    return fetch('/api/auth/logout', {\n      method: 'POST',\n      credentials: 'same-origin'\n    }).then(function (response) {\n      if (response.status === 204) {\n        return {};\n      } else {\n        return {\n          isError: true,\n          error: response.json()\n        };\n      }\n    }, function (error) {\n      return {\n        isError: true,\n        error: error\n      };\n    });\n  },\n  status: function status() {\n    return fetch('/api/auth/status', {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json'\n      },\n      credentials: 'same-origin'\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.json();\n      } else {\n        return {\n          isError: true,\n          error: response.json()\n        };\n      }\n    }, function (error) {\n      return {\n        isError: true,\n        data: error\n      };\n    });\n  },\n  profile: function profile(_profile) {\n    if (_profile) {\n      // update\n      return fetch('/api/auth/profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(_profile),\n        credentials: 'same-origin'\n      }).then(function (response) {\n        if (response.status === 201 || response.status === 204) {\n          return {};\n        } else {\n          return {\n            isError: true,\n            error: response.json()\n          };\n        }\n      }, function (error) {\n        return {\n          isError: true,\n          data: error\n        };\n      });\n    } else {\n      // get\n      return fetch('/api/auth/profile', {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json'\n        },\n        credentials: 'same-origin'\n      }).then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        } else if (response.status === 204 || response.status === 404) {\n          return {};\n        } else {\n          return {\n            isError: true,\n            error: response.json()\n          };\n        }\n      }, function (error) {\n        return {\n          isError: true,\n          data: error\n        };\n      });\n    }\n  }\n};",{"version":3,"sources":["/space/metadata/ui/src/api/AuthApi.js"],"names":["polyfill","name","login","user","pass","fetch","method","headers","Accept","body","JSON","stringify","username","password","credentials","then","response","status","json","isError","error","logout","data","profile"],"mappings":"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","sourcesContent":["import { polyfill } from 'es6-promise';\nimport 'isomorphic-fetch';\n\npolyfill();\n\nexport default {\n  name: 'AuthApi',\n\n  login(user, pass) {\n    return fetch('/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        username: '' + user,\n        password: '' + pass\n      }),\n      credentials: 'same-origin'\n    }).then(\n      response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          return { isError: true, error: response.json() };\n        }\n      },\n      error => {\n        return { isError: true, error: error };\n      }\n    );\n  },\n\n  logout() {\n    return fetch('/api/auth/logout', {\n      method: 'POST',\n      credentials: 'same-origin'\n    }).then(\n      response => {\n        if (response.status === 204) {\n          return {};\n        } else {\n          return { isError: true, error: response.json() };\n        }\n      },\n      error => {\n        return { isError: true, error: error };\n      }\n    );\n  },\n\n  status() {\n    return fetch('/api/auth/status', {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json'\n      },\n      credentials: 'same-origin'\n    }).then(\n      response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          return { isError: true, error: response.json() };\n        }\n      },\n      error => {\n        return { isError: true, data: error };\n      }\n    );\n  },\n\n  profile(profile) {\n    if (profile) {\n      // update\n      return fetch('/api/auth/profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(profile),\n        credentials: 'same-origin'\n      }).then(\n        response => {\n          if (response.status === 201 || response.status === 204) {\n            return {};\n          } else {\n            return { isError: true, error: response.json() };\n          }\n        },\n        error => {\n          return { isError: true, data: error };\n        }\n      );\n    } else {\n      // get\n      return fetch('/api/auth/profile', {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json'\n        },\n        credentials: 'same-origin'\n      }).then(\n        response => {\n          if (response.status === 200) {\n            return response.json();\n          } else if (response.status === 204 || response.status === 404) {\n            return {};\n          } else {\n            return { isError: true, error: response.json() };\n          }\n        },\n        error => {\n          return { isError: true, data: error };\n        }\n      );\n    }\n  }\n};\n"]}]}