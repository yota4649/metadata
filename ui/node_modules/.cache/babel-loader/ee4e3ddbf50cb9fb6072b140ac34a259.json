{"remainingRequest":"C:\\demo\\metadata\\ui\\node_modules\\babel-loader\\lib\\index.js!C:\\demo\\metadata\\ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\demo\\metadata\\ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\demo\\metadata\\ui\\src\\views\\SearchPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\demo\\metadata\\ui\\src\\views\\SearchPage.vue","mtime":1707869128000},{"path":"C:\\demo\\metadata\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1707869666000},{"path":"C:\\demo\\metadata\\ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1707869666000},{"path":"C:\\demo\\metadata\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1707869666000},{"path":"C:\\demo\\metadata\\ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1707869662000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport mlFacets from '@/components/ml-search/ml-facets.vue';\nimport mlInput from '@/components/ml-search/ml-input.vue';\nimport mlMetrics from '@/components/ml-search/ml-metrics.vue';\nimport mlResults from '@/components/ml-search/ml-results.vue';\nimport mlSelect from '@/components/ml-select.vue';\nimport SearchApi from '@/api/SearchApi.js';\nexport default {\n  name: 'SearchPage',\n  props: ['type'],\n  data: function data() {\n    return {\n      searchPending: false\n    };\n  },\n  components: {\n    mlFacets: mlFacets,\n    mlInput: mlInput,\n    mlMetrics: mlMetrics,\n    mlResults: mlResults,\n    mlSelect: mlSelect\n  },\n  computed: {\n    isLoggedIn: function isLoggedIn() {\n      return this.$store.state.auth.authenticated;\n    },\n    searchState: function searchState() {\n      return this.$store.state.search[this.type];\n    },\n    facets: function facets() {\n      return this.searchState.facets || {};\n    },\n    pageLength: function pageLength() {\n      return this.searchState.pageLength || 10;\n    },\n    total: function total() {\n      return this.searchState.total || 0;\n    },\n    results: function results() {\n      return this.searchState.results;\n    },\n    qtext: function qtext() {\n      return this.searchState.qtext || '';\n    },\n    activeFacets: function activeFacets() {\n      return this.searchState.activeFacets || {};\n    },\n    seconds: function seconds() {\n      return this.searchState.seconds || 0;\n    },\n    metrics: function metrics() {\n      return {\n        total: this.total,\n        page: this.page,\n        pageLength: this.pageLength,\n        seconds: this.seconds\n      };\n    }\n  },\n  created: function created() {\n    if (this.isLoggedIn) {\n      this.page = this.$store.getters['search/' + this.type + '/page'] || 1;\n    }\n  },\n  mounted: function mounted() {\n    if (this.$route.params && this.$route.params.refresh) {\n      this.search();\n    }\n  },\n  watch: {\n    isLoggedIn: function isLoggedIn(_isLoggedIn) {\n      if (_isLoggedIn) {\n        this.search();\n      }\n    }\n  },\n  methods: {\n    toggleFacet: function toggleFacet(facet, type, value) {\n      var _this = this;\n\n      console.log('Toggle ' + facet + ' ' + type + ' ' + value);\n      this.searchPending = true;\n      this.$store.dispatch('search/' + this.type + '/toggleFacet', {\n        facet: facet,\n        type: type,\n        value: value\n      }).then(function () {\n        _this.searchPending = false;\n      });\n    },\n    toggleNegatedFacet: function toggleNegatedFacet(facet, type, value) {\n      var _this2 = this;\n\n      console.log('Negate ' + facet + ' ' + type + ' ' + value);\n      this.searchPending = true;\n      this.$store.dispatch('search/' + this.type + '/toggleFacet', {\n        facet: facet,\n        type: type,\n        value: value,\n        negated: true\n      }).then(function () {\n        _this2.searchPending = false;\n      });\n    },\n    pageChanged: function pageChanged(page) {\n      var _this3 = this;\n\n      console.log('Paging to ' + page);\n      this.searchPending = true;\n      this.$store.dispatch('search/' + this.type + '/paginate', {\n        page: page\n      }).then(function () {\n        _this3.searchPending = false;\n      });\n    },\n    search: function search(qtext) {\n      var _this4 = this;\n\n      console.log('Searching for ' + qtext);\n      this.searchPending = true;\n      this.$store.dispatch('search/' + this.type + '/search', {\n        qtext: qtext\n      }).then(function () {\n        _this4.searchPending = false;\n      });\n    },\n    suggest: function suggest(val) {\n      console.log('Suggest ' + val);\n      return SearchApi.suggest(this.type, val).then(function (response) {\n        return response.suggestions;\n      });\n    }\n  }\n};",{"version":3,"sources":["SearchPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <section>\n    <div class=\"search row\">\n      <div class=\"col-xs-12 search-row\">\n        <ml-input :qtext=\"qtext\" :search=\"search\" :suggest=\"suggest\" class=\"search\"></ml-input>\n      </div>\n      <div class=\"col-xs-12 col-sm-4 col-md-2 facets-col\">\n        <ml-facets v-if=\"facets\" :facets=\"facets\" :toggle=\"toggleFacet\" :active-facets=\"activeFacets\" :negate=\"toggleNegatedFacet\"></ml-facets>\n      </div>\n      <div class=\"col-xs-12 col-sm-8 col-md-10 results-col\">\n        <!-- TODO: hide spinner when search is done? -->\n<!--\n        <i class=\"fa fa-refresh pull-right\" :class=\"searchPending ? 'fa-spin' : ''\"\n          v-on:click.prevent=\"$forceUpdate()\"></i>\n-->\n        <i class=\"fa fa-refresh pull-right\" :class=\"searchPending ? 'fa-spin' : ''\"\n          v-on:click=\"$forceUpdate()\"></i>\n        <transition name=\"fade\" mode=\"out-in\">\n          <h4 v-if=\"!results\">Do a search to get results</h4>\n          <h4 v-else-if=\"total === 0\">No results to show</h4>\n          <div v-else class=\"results\">\n            <!-- TODO: pagination should go below results, but search option like snippet and sorting should remain on top.. -->\n            <div class=\"pagination-ctrls\">\n              <b-pagination size=\"sm\" v-model=\"page\" v-on:change=\"pageChanged\" :limit=\"10\" boundary-links=\"true\" :total-rows=\"total\" :per-page=\"pageLength\">\n              </b-pagination>\n              <!--div class=\"col-sm-12 col-lg-5\" id=\"search-operator-dropdowns\">\n                <ml-select label=\"'Snippet Size'\" current-selection=\"mlSearch.getSnippet() || 'compact'\" selection-list=\"snippetList\" on-select=\"setSnippet(selectionName)\"></ml-select>\n                <ml-select label=\"'Sort'\" current-selection=\"mlSearch.getSort() || 'score'\" selection-list=\"sortList\" on-select=\"setSort(selectionName)\"></ml-select>\n              </div-->\n            </div>\n            <ml-metrics :metrics=\"metrics\"></ml-metrics>\n            <ml-results :results=\"results\"></ml-results>\n          </div>\n        </transition>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport mlFacets from '@/components/ml-search/ml-facets.vue';\nimport mlInput from '@/components/ml-search/ml-input.vue';\nimport mlMetrics from '@/components/ml-search/ml-metrics.vue';\nimport mlResults from '@/components/ml-search/ml-results.vue';\nimport mlSelect from '@/components/ml-select.vue';\nimport SearchApi from '@/api/SearchApi.js';\n\nexport default {\n  name: 'SearchPage',\n  props: ['type'],\n  data() {\n    return {\n      searchPending: false\n    };\n  },\n  components: {\n    mlFacets,\n    mlInput,\n    mlMetrics,\n    mlResults,\n    mlSelect\n  },\n  computed: {\n    isLoggedIn() {\n      return this.$store.state.auth.authenticated;\n    },\n    searchState() {\n      return this.$store.state.search[this.type];\n    },\n    facets() {\n      return this.searchState.facets || {};\n    },\n    pageLength() {\n      return this.searchState.pageLength || 10;\n    },\n    total() {\n      return this.searchState.total || 0;\n    },\n    results() {\n      return this.searchState.results;\n    },\n    qtext() {\n      return this.searchState.qtext || '';\n    },\n    activeFacets() {\n      return this.searchState.activeFacets || {};\n    },\n    seconds() {\n      return this.searchState.seconds || 0;\n    },\n    metrics() {\n      return {\n        total: this.total,\n        page: this.page,\n        pageLength: this.pageLength,\n        seconds: this.seconds\n      };\n    }\n  },\n  created() {\n    if (this.isLoggedIn) {\n      this.page = this.$store.getters['search/' + this.type + '/page'] || 1;\n    }\n  },\n  mounted() {\n    if (this.$route.params && this.$route.params.refresh) {\n      this.search();\n    }\n  },\n  watch: {\n    isLoggedIn: function(isLoggedIn) {\n      if (isLoggedIn) {\n        this.search();\n      }\n    }\n  },\n  methods: {\n    toggleFacet(facet, type, value) {\n      console.log('Toggle ' + facet + ' ' + type + ' ' + value);\n      this.searchPending = true;\n      this.$store\n        .dispatch('search/' + this.type + '/toggleFacet', {\n          facet,\n          type,\n          value\n        })\n        .then(() => {\n          this.searchPending = false;\n        });\n    },\n    toggleNegatedFacet(facet, type, value) {\n      console.log('Negate ' + facet + ' ' + type + ' ' + value);\n      this.searchPending = true;\n      this.$store\n        .dispatch('search/' + this.type + '/toggleFacet', {\n          facet,\n          type,\n          value,\n          negated: true\n        })\n        .then(() => {\n          this.searchPending = false;\n        });\n    },\n    pageChanged(page) {\n      console.log('Paging to ' + page);\n      this.searchPending = true;\n      this.$store\n        .dispatch('search/' + this.type + '/paginate', { page })\n        .then(() => {\n          this.searchPending = false;\n        });\n    },\n    search(qtext) {\n      console.log('Searching for ' + qtext);\n      this.searchPending = true;\n      this.$store\n        .dispatch('search/' + this.type + '/search', {\n          qtext\n        })\n        .then(() => {\n          this.searchPending = false;\n        });\n    },\n    suggest(val) {\n      console.log('Suggest ' + val);\n      return SearchApi.suggest(this.type, val).then(response => {\n        return response.suggestions;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.search-row {\n  margin-top: 20px;\n  form {\n    padding-bottom: 0;\n  }\n}\n</style>\n"],"sourceRoot":"src\\views"}]}