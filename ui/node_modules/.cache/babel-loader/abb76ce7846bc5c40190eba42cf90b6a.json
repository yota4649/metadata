{"remainingRequest":"/space/metadata/ui/node_modules/babel-loader/lib/index.js!/space/metadata/ui/src/router.js","dependencies":[{"path":"/space/metadata/ui/src/router.js","mtime":1708863746561},{"path":"/space/metadata/ui/node_modules/cache-loader/dist/cjs.js","mtime":1707869666420},{"path":"/space/metadata/ui/node_modules/babel-loader/lib/index.js","mtime":1707869666788}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport { sync } from 'vuex-router-sync';\nimport $store from './store';\nVue.use(Router);\n\nvar checkLogin = function checkLogin(to, from, next) {\n  if (!$store.state.initialized) {\n    $store.dispatch('init').then(function () {\n      redirectBasedOnAuth(to, from, next);\n    });\n  } else {\n    redirectBasedOnAuth(to, from, next);\n  }\n};\n\nvar redirectBasedOnAuth = function redirectBasedOnAuth(to, from, next) {\n  if ($store.state.auth.authenticated || !(to.meta.requiresLogin || to.meta.requiresUpdates)) {\n    next();\n  } else {\n    next({\n      replace: true,\n      name: 'root.login',\n      params: {\n        state: to.name,\n        params: to.params\n      }\n    });\n  }\n};\n\nvar $router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [{\n    path: '/',\n    name: 'root.landing',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"landing\" */\n      './views/LandingPage.vue');\n    },\n    meta: {\n      label: 'Home',\n      navArea: 'header'\n    }\n  }, {\n    path: '/upload/all',\n    name: 'root.upload',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"upload\" */\n      './views/UploadPage.vue');\n    },\n    props: {\n      type: 'all'\n    },\n    meta: {\n      label: 'Upload',\n      navArea: 'header',\n      requiresUpdates: true,\n      checkLogin: checkLogin\n    }\n  }, {\n    path: '/search/all',\n    name: 'root.search',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"search\" */\n      './views/SearchPage.vue');\n    },\n    props: {\n      type: 'all'\n    },\n    meta: {\n      label: 'Search',\n      navArea: 'header',\n      requiresLogin: true,\n      checkLogin: checkLogin\n    }\n  }, {\n    path: '/create/all',\n    name: 'root.create',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"create\" */\n      './views/CreatePage.vue');\n    },\n    props: {\n      type: 'all'\n    },\n    meta: {\n      label: 'Create',\n      navArea: 'header',\n      requiresUpdates: true\n    }\n  }, {\n    path: '/login',\n    name: 'root.login',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"login\" */\n      './views/LoginPage.vue');\n    },\n    meta: {\n      label: 'Login',\n      navArea: 'usermenu'\n    }\n  }, {\n    path: '/profile',\n    name: 'root.profile',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"profile\" */\n      './views/ProfilePage.vue');\n    },\n    meta: {\n      label: 'Profile',\n      navArea: 'usermenu',\n      requiresLogin: true\n    }\n  }, {\n    path: '/edit/all/:id',\n    name: 'root.edit',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"create\" */\n      './views/CreatePage.vue');\n    },\n    props: function props($route) {\n      return {\n        type: 'all',\n        id: $route.params.id\n      };\n    },\n    meta: {\n      label: 'Edit',\n      navArea: 'document',\n      requiresUpdates: true\n    }\n  }, {\n    path: '/detail/all/:id',\n    name: 'root.view',\n    // lazy-loading of page\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"detail\" */\n      './views/DetailPage.vue');\n    },\n    props: function props($route) {\n      return {\n        type: 'all',\n        id: $route.params.id\n      };\n    },\n    meta: {\n      label: 'View',\n      navArea: 'document',\n      requiresLogin: true\n    }\n  }]\n}); // Keep the router in sync with vuex store\n\nsync($store, $router); // Protect all protected routes, redirecting to login if needed\n\n$router.beforeEach(checkLogin);\nexport default $router;",{"version":3,"sources":["/space/metadata/ui/src/router.js"],"names":["Vue","Router","sync","$store","use","checkLogin","to","from","next","state","initialized","dispatch","then","redirectBasedOnAuth","auth","authenticated","meta","requiresLogin","requiresUpdates","replace","name","params","$router","mode","base","process","env","BASE_URL","routes","path","component","label","navArea","props","type","$route","id","beforeEach"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport { sync } from 'vuex-router-sync';\n\nimport $store from './store';\n\nVue.use(Router);\n\nconst checkLogin = (to, from, next) => {\n  if (!$store.state.initialized) {\n    $store.dispatch('init').then(function() {\n      redirectBasedOnAuth(to, from, next);\n    });\n  } else {\n    redirectBasedOnAuth(to, from, next);\n  }\n};\n\nconst redirectBasedOnAuth = (to, from, next) => {\n  if (\n    $store.state.auth.authenticated ||\n    !(to.meta.requiresLogin || to.meta.requiresUpdates)\n  ) {\n    next();\n  } else {\n    next({\n      replace: true,\n      name: 'root.login',\n      params: { state: to.name, params: to.params }\n    });\n  }\n};\n\nconst $router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: '/',\n      name: 'root.landing',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"landing\" */ './views/LandingPage.vue'),\n      meta: {\n        label: 'Home',\n        navArea: 'header'\n      }\n    },\n    {\n      path: '/upload/all',\n      name: 'root.upload',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"upload\" */ './views/UploadPage.vue'),\n      props: {\n        type: 'all'\n      },\n      meta: {\n        label: 'Upload',\n        navArea: 'header',\n        requiresUpdates: true,\n        checkLogin\n      }\n    },\n    {\n      path: '/search/all',\n      name: 'root.search',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"search\" */ './views/SearchPage.vue'),\n      props: {\n        type: 'all'\n      },\n      meta: {\n        label: 'Search',\n        navArea: 'header',\n        requiresLogin: true,\n        checkLogin\n      }\n    },\n    {\n      path: '/create/all',\n      name: 'root.create',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"create\" */ './views/CreatePage.vue'),\n      props: {\n        type: 'all'\n      },\n      meta: {\n        label: 'Create',\n        navArea: 'header',\n        requiresUpdates: true\n      }\n    },\n    {\n      path: '/login',\n      name: 'root.login',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"login\" */ './views/LoginPage.vue'),\n      meta: {\n        label: 'Login',\n        navArea: 'usermenu'\n      }\n    },\n    {\n      path: '/profile',\n      name: 'root.profile',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"profile\" */ './views/ProfilePage.vue'),\n      meta: {\n        label: 'Profile',\n        navArea: 'usermenu',\n        requiresLogin: true\n      }\n    },\n    {\n      path: '/edit/all/:id',\n      name: 'root.edit',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"create\" */ './views/CreatePage.vue'),\n      props($route) {\n        return {\n          type: 'all',\n          id: $route.params.id\n        };\n      },\n      meta: {\n        label: 'Edit',\n        navArea: 'document',\n        requiresUpdates: true\n      }\n    },\n    {\n      path: '/detail/all/:id',\n      name: 'root.view',\n      // lazy-loading of page\n      component: () =>\n        import(/* webpackChunkName: \"detail\" */ './views/DetailPage.vue'),\n      props($route) {\n        return {\n          type: 'all',\n          id: $route.params.id\n        };\n      },\n      meta: {\n        label: 'View',\n        navArea: 'document',\n        requiresLogin: true\n      }\n    }\n  ]\n});\n\n// Keep the router in sync with vuex store\nsync($store, $router);\n\n// Protect all protected routes, redirecting to login if needed\n$router.beforeEach(checkLogin);\n\nexport default $router;\n"]}]}