{"remainingRequest":"/space/metadata/ui/node_modules/babel-loader/lib/index.js!/space/metadata/ui/src/store.js","dependencies":[{"path":"/space/metadata/ui/src/store.js","mtime":1708873882968},{"path":"/space/metadata/ui/node_modules/cache-loader/dist/cjs.js","mtime":1707869666420},{"path":"/space/metadata/ui/node_modules/babel-loader/lib/index.js","mtime":1707869666788}],"contextDependencies":[],"result":["import _objectSpread from \"/space/metadata/ui/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport authApi from './api/AuthApi';\nimport searchApi from './api/SearchApi';\nimport crudApi from './api/CRUDApi';\nVue.use(Vuex);\nvar debug = true; //(process !== undefined) ? process.env.NODE_ENV !== \"production\" : true;\n\nvar auth = {\n  namespaced: true,\n  state: {\n    initialized: false,\n    authenticated: false,\n    username: undefined,\n    profile: undefined\n  },\n  mutations: {\n    isInitialized: function isInitialized(state, _ref) {\n      var initialized = _ref.initialized;\n      state.initialized = initialized;\n    },\n    isAuthenticated: function isAuthenticated(state, _ref2) {\n      var authenticated = _ref2.authenticated;\n      state.authenticated = authenticated;\n\n      if (!authenticated) {\n        state.username = undefined;\n        state.profile = undefined;\n      }\n    },\n    loggedIn: function loggedIn(state, _ref3) {\n      var username = _ref3.username;\n      state.authenticated = true;\n      state.username = username;\n    },\n    loggedOut: function loggedOut(state) {\n      state.authenticated = false;\n      state.username = undefined;\n      state.profile = undefined;\n    },\n    setProfile: function setProfile(state, _ref4) {\n      var profile = _ref4.profile;\n      state.profile = profile || {};\n    }\n  },\n  actions: {\n    init: function init(_ref5) {\n      var commit = _ref5.commit,\n          dispatch = _ref5.dispatch;\n      return authApi.status().then(function (result) {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          commit('isInitialized', {\n            initialized: true\n          });\n          commit('isAuthenticated', {\n            authenticated: result.authenticated\n          });\n\n          if (result.authenticated) {\n            dispatch('loggedIn', {\n              username: result.username\n            }, {\n              root: true\n            });\n            authApi.profile().then(function (result) {\n              if (result.isError) {\n                // error\n                return result;\n              } else {\n                commit('setProfile', {\n                  profile: result\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n    login: function login(_ref6, _ref7) {\n      var commit = _ref6.commit,\n          dispatch = _ref6.dispatch;\n      var user = _ref7.user,\n          pass = _ref7.pass;\n      return authApi.login(user, pass).then(function (result) {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch('loggedIn', {\n            username: user\n          }, {\n            root: true\n          });\n          authApi.profile().then(function (result) {\n            if (result.isError) {\n              // error\n              return result;\n            } else {\n              commit('setProfile', {\n                profile: result\n              });\n            }\n          });\n        }\n      });\n    },\n    cancelLogin: function cancelLogin() {\n      return new Promise(function (resolve) {\n        resolve();\n      });\n    },\n    logout: function logout(_ref8) {\n      var dispatch = _ref8.dispatch;\n      return authApi.logout().then(function (result) {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch('loggedOut', null, {\n            root: true\n          });\n        }\n      });\n    },\n    initProfile: function initProfile(_ref9, payload) {\n      var dispatch = _ref9.dispatch;\n      return authApi.profile(payload).then(function (result) {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch('getStatus');\n        }\n      });\n    }\n  }\n};\n\nfunction typedSearchState(searchType) {\n  return {\n    namespaced: true,\n    state: {\n      initialized: false,\n      start: 1,\n      pageLength: 10,\n      total: 0,\n      facets: {},\n      results: undefined,\n      qtext: '',\n      activeFacets: {}\n    },\n    mutations: {\n      isInitialized: function isInitialized(state, _ref10) {\n        var initialized = _ref10.initialized;\n        state.initialized = initialized;\n      },\n      setResults: function setResults(state, _ref11) {\n        var response = _ref11.response;\n\n        if (response.results) {\n          state.total = response.total;\n          state.results = response.results;\n        }\n      },\n      setFacets: function setFacets(state, _ref12) {\n        var response = _ref12.response;\n\n        if (response.facets) {\n          state.facets = response.facets;\n        }\n      },\n      setText: function setText(state, _ref13) {\n        var qtext = _ref13.qtext;\n\n        if (qtext !== undefined) {\n          state.qtext = qtext;\n        }\n      },\n      setPage: function setPage(state, _ref14) {\n        var page = _ref14.page;\n        state.start = (page - 1) * state.pageLength + 1;\n      },\n      toggleActiveFacet: function toggleActiveFacet(state, _ref15) {\n        var facet = _ref15.facet,\n            type = _ref15.type,\n            value = _ref15.value,\n            negated = _ref15.negated;\n        var activeFacet = state.activeFacets[facet];\n\n        if (activeFacet) {\n          var activeValue = activeFacet.values.filter(function (facetValue) {\n            return facetValue.value === value;\n          });\n\n          if (activeValue.length) {\n            activeFacet.values = activeFacet.values.filter(function (facetValue) {\n              return facetValue.value !== value;\n            });\n          } else {\n            activeFacet.values.push({\n              value: value,\n              negated: negated\n            });\n          }\n        } else {\n          state.activeFacets[facet] = {\n            type: type,\n            values: [{\n              value: value,\n              negated: negated\n            }]\n          };\n        } // FIXME? clone activeFacets to 'force' ui updates\n\n\n        state.activeFacets = _objectSpread({}, state.activeFacets);\n      }\n    },\n    actions: {\n      init: function init(_ref16) {\n        var commit = _ref16.commit,\n            state = _ref16.state;\n        commit('isInitialized', {\n          initialized: true\n        });\n        searchApi.getFacets(searchType, state.qtext, state.activeFacets).then(function (result) {\n          if (result.response) {\n            commit('setFacets', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n        return searchApi.getResults(searchType, state.qtext, state.activeFacets, state.start, state.pageLength).then(function (result) {\n          if (result.response) {\n            commit('setResults', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n      },\n      search: function search(_ref17, _ref18) {\n        var commit = _ref17.commit,\n            state = _ref17.state;\n        var qtext = _ref18.qtext;\n        commit('setText', {\n          qtext: qtext\n        });\n        searchApi.getFacets(searchType, state.qtext, state.activeFacets).then(function (result) {\n          if (result.response) {\n            commit('setFacets', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n        return searchApi.getResults(searchType, state.qtext, state.activeFacets, state.start, state.pageLength).then(function (result) {\n          if (result.response) {\n            commit('setResults', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n      },\n      paginate: function paginate(_ref19, _ref20) {\n        var commit = _ref19.commit,\n            state = _ref19.state;\n        var page = _ref20.page;\n        commit('setPage', {\n          page: page\n        });\n        return searchApi.getResults(searchType, state.qtext, state.activeFacets, state.start, state.pageLength).then(function (result) {\n          if (result.response) {\n            commit('setResults', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n      },\n      toggleFacet: function toggleFacet(_ref21, _ref22) {\n        var commit = _ref21.commit,\n            state = _ref21.state;\n        var facet = _ref22.facet,\n            type = _ref22.type,\n            value = _ref22.value,\n            negated = _ref22.negated;\n        commit('toggleActiveFacet', {\n          facet: facet,\n          type: type,\n          value: value,\n          negated: negated\n        });\n        searchApi.getFacets(searchType, state.qtext, state.activeFacets).then(function (result) {\n          if (result.response) {\n            commit('setFacets', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n        return searchApi.getResults(searchType, state.qtext, state.activeFacets, state.start, state.pageLength).then(function (result) {\n          if (result.response) {\n            commit('setResults', result);\n          } else {\n            // error\n            return result;\n          }\n        });\n      }\n    },\n    getters: {\n      page: function page(state) {\n        return Math.ceil(state.start / state.pageLength);\n      }\n    }\n  };\n}\n\nvar types = ['all'];\nvar searchModules = {};\ntypes.forEach(function (type) {\n  searchModules[type] = typedSearchState(type);\n});\nvar search = {\n  namespaced: true,\n  state: {\n    initialized: false\n  },\n  modules: searchModules,\n  mutations: {\n    isInitialized: function isInitialized(state, _ref23) {\n      var initialized = _ref23.initialized;\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init: function init(_ref24) {\n      var commit = _ref24.commit,\n          dispatch = _ref24.dispatch;\n      types.forEach(function (type) {\n        dispatch(type + '/init');\n      });\n      commit('isInitialized', {\n        initialized: true\n      });\n    }\n  }\n};\n\nfunction typedCrudState(crudType) {\n  return {\n    namespaced: true,\n    state: {\n      initialized: false\n    },\n    mutations: {\n      isInitialized: function isInitialized(state, _ref25) {\n        var initialized = _ref25.initialized;\n        state.initialized = initialized;\n      }\n    },\n    actions: {\n      init: function init(_ref26) {\n        var commit = _ref26.commit;\n        commit('isInitialized', {\n          initialized: true\n        });\n      },\n      view: function view(context, _ref27) {\n        var id = _ref27.id,\n            _view = _ref27.view;\n        console.log('---- yota -----', id, _view);\n        return crudApi.view(crudType, id, _view);\n      },\n      create: function create(context, _ref28) {\n        var id = _ref28.id,\n            data = _ref28.data,\n            format = _ref28.format;\n        return crudApi.create(crudType, id, data, format);\n      },\n      read: function read(context, _ref29) {\n        var id = _ref29.id;\n        return crudApi.read(crudType, id);\n      },\n      update: function update(context, _ref30) {\n        var id = _ref30.id,\n            data = _ref30.data,\n            format = _ref30.format;\n        return crudApi.update(crudType, id, data, format);\n      },\n      delete: function _delete(context, _ref31) {\n        var id = _ref31.id;\n        return crudApi.delete(crudType, id);\n      }\n    }\n  };\n}\n\nvar crudModules = {};\ntypes.forEach(function (type) {\n  crudModules[type] = typedCrudState(type);\n});\nvar crud = {\n  namespaced: true,\n  state: {\n    initialized: false\n  },\n  modules: crudModules,\n  mutations: {\n    isInitialized: function isInitialized(state, _ref32) {\n      var initialized = _ref32.initialized;\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init: function init(_ref33) {\n      var commit = _ref33.commit,\n          dispatch = _ref33.dispatch;\n      types.forEach(function (type) {\n        dispatch(type + '/init');\n      });\n      commit('isInitialized', {\n        initialized: true\n      });\n    }\n  }\n};\nexport default new Vuex.Store({\n  strict: debug,\n  state: {\n    initialized: false\n  },\n  mutations: {\n    isInitialized: function isInitialized(state, _ref34) {\n      var initialized = _ref34.initialized;\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init: function init(_ref35) {\n      var commit = _ref35.commit,\n          dispatch = _ref35.dispatch;\n      return dispatch('auth/init').then(function () {\n        commit('isInitialized', {\n          initialized: true\n        });\n      });\n    },\n    loggedIn: function loggedIn(_ref36, payload) {\n      var commit = _ref36.commit,\n          dispatch = _ref36.dispatch;\n      commit('auth/loggedIn', payload);\n      dispatch('search/init');\n      dispatch('crud/init');\n    },\n    loggedOut: function loggedOut(_ref37, payload) {\n      var commit = _ref37.commit;\n      commit('auth/loggedOut', payload);\n    }\n  },\n  modules: {\n    auth: auth,\n    search: search,\n    crud: crud\n  }\n});",{"version":3,"sources":["/space/metadata/ui/src/store.js"],"names":["Vue","Vuex","authApi","searchApi","crudApi","use","debug","auth","namespaced","state","initialized","authenticated","username","undefined","profile","mutations","isInitialized","isAuthenticated","loggedIn","loggedOut","setProfile","actions","init","commit","dispatch","status","then","result","isError","root","login","user","pass","cancelLogin","Promise","resolve","logout","initProfile","payload","typedSearchState","searchType","start","pageLength","total","facets","results","qtext","activeFacets","setResults","response","setFacets","setText","setPage","page","toggleActiveFacet","facet","type","value","negated","activeFacet","activeValue","values","filter","facetValue","length","push","getFacets","getResults","search","paginate","toggleFacet","getters","Math","ceil","types","searchModules","forEach","modules","typedCrudState","crudType","view","context","id","console","log","create","data","format","read","update","delete","crudModules","crud","Store","strict"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\n\nimport authApi from './api/AuthApi';\nimport searchApi from './api/SearchApi';\nimport crudApi from './api/CRUDApi';\n\nVue.use(Vuex);\n\nconst debug = true; //(process !== undefined) ? process.env.NODE_ENV !== \"production\" : true;\n\nconst auth = {\n  namespaced: true,\n  state: {\n    initialized: false,\n    authenticated: false,\n    username: undefined,\n    profile: undefined\n  },\n  mutations: {\n    isInitialized(state, { initialized }) {\n      state.initialized = initialized;\n    },\n    isAuthenticated(state, { authenticated }) {\n      state.authenticated = authenticated;\n      if (!authenticated) {\n        state.username = undefined;\n        state.profile = undefined;\n      }\n    },\n    loggedIn(state, { username }) {\n      state.authenticated = true;\n      state.username = username;\n    },\n    loggedOut(state) {\n      state.authenticated = false;\n      state.username = undefined;\n      state.profile = undefined;\n    },\n    setProfile(state, { profile }) {\n      state.profile = profile || {};\n    }\n  },\n  actions: {\n    init({ commit, dispatch }) {\n      return authApi.status().then(result => {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          commit('isInitialized', { initialized: true });\n          commit('isAuthenticated', {\n            authenticated: result.authenticated\n          });\n          if (result.authenticated) {\n            dispatch(\n              'loggedIn',\n              {\n                username: result.username\n              },\n              { root: true }\n            );\n            authApi.profile().then(result => {\n              if (result.isError) {\n                // error\n                return result;\n              } else {\n                commit('setProfile', {\n                  profile: result\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n    login({ commit, dispatch }, { user, pass }) {\n      return authApi.login(user, pass).then(result => {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch(\n            'loggedIn',\n            {\n              username: user\n            },\n            { root: true }\n          );\n          authApi.profile().then(result => {\n            if (result.isError) {\n              // error\n              return result;\n            } else {\n              commit('setProfile', {\n                profile: result\n              });\n            }\n          });\n        }\n      });\n    },\n    cancelLogin() {\n      return new Promise(resolve => {\n        resolve();\n      });\n    },\n    logout({ dispatch }) {\n      return authApi.logout().then(result => {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch('loggedOut', null, { root: true });\n        }\n      });\n    },\n    initProfile({ dispatch }, payload) {\n      return authApi.profile(payload).then(result => {\n        if (result.isError) {\n          // error\n          return result;\n        } else {\n          dispatch('getStatus');\n        }\n      });\n    }\n  }\n};\n\nfunction typedSearchState(searchType) {\n  return {\n    namespaced: true,\n    state: {\n      initialized: false,\n      start: 1,\n      pageLength: 10,\n      total: 0,\n      facets: {},\n      results: undefined,\n      qtext: '',\n      activeFacets: {}\n    },\n    mutations: {\n      isInitialized(state, { initialized }) {\n        state.initialized = initialized;\n      },\n      setResults(state, { response }) {\n        if (response.results) {\n          state.total = response.total;\n          state.results = response.results;\n        }\n      },\n      setFacets(state, { response }) {\n        if (response.facets) {\n          state.facets = response.facets;\n        }\n      },\n      setText(state, { qtext }) {\n        if (qtext !== undefined) {\n          state.qtext = qtext;\n        }\n      },\n      setPage(state, { page }) {\n        state.start = (page - 1) * state.pageLength + 1;\n      },\n      toggleActiveFacet(state, { facet, type, value, negated }) {\n        const activeFacet = state.activeFacets[facet];\n        if (activeFacet) {\n          const activeValue = activeFacet.values.filter(facetValue => {\n            return facetValue.value === value;\n          });\n          if (activeValue.length) {\n            activeFacet.values = activeFacet.values.filter(facetValue => {\n              return facetValue.value !== value;\n            });\n          } else {\n            activeFacet.values.push({\n              value: value,\n              negated: negated\n            });\n          }\n        } else {\n          state.activeFacets[facet] = {\n            type: type,\n            values: [{ value: value, negated: negated }]\n          };\n        }\n        // FIXME? clone activeFacets to 'force' ui updates\n        state.activeFacets = {\n          ...state.activeFacets\n        };\n      }\n    },\n    actions: {\n      init({ commit, state }) {\n        commit('isInitialized', { initialized: true });\n        searchApi\n          .getFacets(searchType, state.qtext, state.activeFacets)\n          .then(result => {\n            if (result.response) {\n              commit('setFacets', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n        return searchApi\n          .getResults(\n            searchType,\n            state.qtext,\n            state.activeFacets,\n            state.start,\n            state.pageLength\n          )\n          .then(result => {\n            if (result.response) {\n              commit('setResults', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n      },\n      search({ commit, state }, { qtext }) {\n        commit('setText', { qtext });\n        searchApi\n          .getFacets(searchType, state.qtext, state.activeFacets)\n          .then(result => {\n            if (result.response) {\n              commit('setFacets', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n        return searchApi\n          .getResults(\n            searchType,\n            state.qtext,\n            state.activeFacets,\n            state.start,\n            state.pageLength\n          )\n          .then(result => {\n            if (result.response) {\n              commit('setResults', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n      },\n      paginate({ commit, state }, { page }) {\n        commit('setPage', { page });\n        return searchApi\n          .getResults(\n            searchType,\n            state.qtext,\n            state.activeFacets,\n            state.start,\n            state.pageLength\n          )\n          .then(result => {\n            if (result.response) {\n              commit('setResults', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n      },\n      toggleFacet({ commit, state }, { facet, type, value, negated }) {\n        commit('toggleActiveFacet', { facet, type, value, negated });\n        searchApi\n          .getFacets(searchType, state.qtext, state.activeFacets)\n          .then(result => {\n            if (result.response) {\n              commit('setFacets', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n        return searchApi\n          .getResults(\n            searchType,\n            state.qtext,\n            state.activeFacets,\n            state.start,\n            state.pageLength\n          )\n          .then(result => {\n            if (result.response) {\n              commit('setResults', result);\n            } else {\n              // error\n              return result;\n            }\n          });\n      }\n    },\n    getters: {\n      page(state) {\n        return Math.ceil(state.start / state.pageLength);\n      }\n    }\n  };\n}\n\nconst types = ['all'];\n\nvar searchModules = {};\ntypes.forEach(function(type) {\n  searchModules[type] = typedSearchState(type);\n});\n\nconst search = {\n  namespaced: true,\n  state: {\n    initialized: false\n  },\n  modules: searchModules,\n  mutations: {\n    isInitialized(state, { initialized }) {\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init({ commit, dispatch }) {\n      types.forEach(function(type) {\n        dispatch(type + '/init');\n      });\n      commit('isInitialized', { initialized: true });\n    }\n  }\n};\n\nfunction typedCrudState(crudType) {\n  return {\n    namespaced: true,\n    state: {\n      initialized: false\n    },\n    mutations: {\n      isInitialized(state, { initialized }) {\n        state.initialized = initialized;\n      }\n    },\n    actions: {\n      init({ commit }) {\n        commit('isInitialized', { initialized: true });\n      },\n      view(context, { id, view }) {\n\t      console.log('---- yota -----',id,view); \n        return crudApi.view(crudType, id, view);\n      },\n      create(context, { id, data, format }) {\n        return crudApi.create(crudType, id, data, format);\n      },\n      read(context, { id }) {\n        return crudApi.read(crudType, id);\n      },\n      update(context, { id, data, format }) {\n        return crudApi.update(crudType, id, data, format);\n      },\n      delete(context, { id }) {\n        return crudApi.delete(crudType, id);\n      }\n    }\n  };\n}\n\nvar crudModules = {};\ntypes.forEach(function(type) {\n  crudModules[type] = typedCrudState(type);\n});\n\nconst crud = {\n  namespaced: true,\n  state: {\n    initialized: false\n  },\n  modules: crudModules,\n  mutations: {\n    isInitialized(state, { initialized }) {\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init({ commit, dispatch }) {\n      types.forEach(function(type) {\n        dispatch(type + '/init');\n      });\n      commit('isInitialized', { initialized: true });\n    }\n  }\n};\n\nexport default new Vuex.Store({\n  strict: debug,\n  state: {\n    initialized: false\n  },\n  mutations: {\n    isInitialized(state, { initialized }) {\n      state.initialized = initialized;\n    }\n  },\n  actions: {\n    init({ commit, dispatch }) {\n      return dispatch('auth/init').then(function() {\n        commit('isInitialized', { initialized: true });\n      });\n    },\n    loggedIn({ commit, dispatch }, payload) {\n      commit('auth/loggedIn', payload);\n      dispatch('search/init');\n      dispatch('crud/init');\n    },\n    loggedOut({ commit }, payload) {\n      commit('auth/loggedOut', payload);\n    }\n  },\n  modules: {\n    auth,\n    search,\n    crud\n  }\n});\n"]}]}